set "_BUILDTIME_COREDDS_HOME=@CoreDDS_HOME@"

if exist "%_BUILDTIME_COREDDS_HOME%" (
  if "%COREDDS_HOME%" NEQ "" (
    if "%COREDDS_HOME%" NEQ "%_BUILDTIME_COREDDS_HOME%" (
      echo "[coredds_cmake_module] Warning: COREDDS_HOME environment variable is set to [[%COREDDS_HOME%]]. When the workspace was built, CoreDDS was found at [[%_BUILDTIME_COREDDS_HOME%]], which is what will actually be used. Manually modify the environment now if this is not the configuration you want." 1>&2
    )
  )
  set "_COREDDS_HOME_TO_USE=%_BUILDTIME_COREDDS_HOME%"
) else (
  if "%COREDDS_HOME%" == "" (
    echo [coredds_cmake_module] Warning: The location at which CoreDDS was found when the workspace was built [[%_BUILDTIME_COREDDS_HOME%]] does not point to a valid directory, and the COREDDS_HOME environment variable has not been set. Support for CoreDDS will not be available. 1>&2
    set "_BUILDTIME_COREDDS_HOMESHOME="
    goto :eof
  )

  if not exist "%COREDDS_HOME%" (
    echo [coredds_cmake_module] Warning: Neither the location at which CoreDDS was found when the workspace was built [[%_BUILDTIME_COREDDS_HOME%]] nor the COREDDS_HOME environment variable [[%COREDDS_HOME%]] point to a valid directory. Support for CoreDDS will not be available. 1>&2
    set "_BUILDTIME_COREDDSDDSHOME="
    goto :eof
  )
  set "_COREDDS_HOME_TO_USE=%COREDDS_HOME%"
)

echo %PATH%|find /i "%_COREDDS_HOME_TO_USE%\lib;">nul || set PATH=%PATH%;%_COREDDS_HOME_TO_USE%\lib;

set "_BUILDTIME_COREDDS_HOME="
set "_COREDDS_HOME_TO_USE="
